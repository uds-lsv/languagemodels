docker build -f ./docker/Dockerfile --build-arg USER_UID=$UID --build-arg USER_NAME=$(id -un) -t languagemodels:latest .

######################
#     LSV Server     #
######################

# run docker as user mmosbach for VSCode dev on PC
docker run -it --rm --runtime=nvidia --pid=host --ipc=host --user mmosbach \
    --name languagemodels-dev \
    -v /nethome/mmosbach/projects/languagemodels:/languagemodels \
    -v /data/users/mmosbach/pre-trained-transformers:/pre-trained-transformers \
    -v /data/users/mmosbach/datasets:/datasets \
    -v /data/users/mmosbach/logs/languagemodels/logfiles:/logfiles \
    languagemodels:latest


# run docker as user mmosbach on compute nodes
docker run -it --rm --gpus=all --pid=host --ipc=host --user mmosbach \
    exit
    -v /data/users/mmosbach/pre-trained-transformers:/pre-trained-transformers \
    -v /data/users/mmosbach/datasets:/datasets \
    -v /data/users/mmosbach/logs/languagemodels/logfiles:/logfiles \
    languagemodels:latest